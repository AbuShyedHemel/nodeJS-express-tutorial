"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parse = void 0;
const parsers_1 = require("./parsers");
function parse(fn) {
    // normalize filename
    const filename = fn.trim();
    const parsedMediaType = parsers_1.parseMediaType(filename);
    if (!parsedMediaType) {
        throw new Error('Could not parse media type.');
    }
    const container = parsers_1.parseFileContainer(filename);
    return Object.assign(Object.assign({}, parsedMediaType), { year: parsers_1.parseYear(filename), resolution: parsers_1.parseResolution(filename), source: parsers_1.parseSource(filename), codecs: parsers_1.parseCodecs(filename), container: container === null || container === void 0 ? void 0 : container.container, mimeType: container === null || container === void 0 ? void 0 : container.mimeType, tags: parsers_1.parseTags(filename), releaseGroup: parsers_1.parseReleaseGroup(filename) });
}
exports.parse = parse;
